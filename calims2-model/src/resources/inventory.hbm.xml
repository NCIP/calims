<?xml version="1.0" encoding="UTF-8"?>

<!--L
  Copyright Moxie Informatics.

  Distributed under the OSI-approved BSD 3-Clause License.
  See http://ncip.github.com/calims/LICENSE.txt for details.
L-->

<!DOCTYPE hibernate-mapping PUBLIC 
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
  <query name="gov.nih.nci.calims2.domain.inventory.Container.findByIds">
    <![CDATA[from gov.nih.nci.calims2.domain.inventory.Container where id in (:ids)]]>
  </query>
  <query name="gov.nih.nci.calims2.domain.inventory.Container.findContainersForSpecimenCreation">
    <![CDATA[select c from gov.nih.nci.calims2.domain.inventory.Container as c inner join c.containerType as ct
    where c.isTemplate = false and ((ct.composition = 'COMPOSITE' and c.id not in(select distinct container.parentContainer.id from gov.nih.nci.calims2.domain.inventory.Specimen where container.parentContainer.id is not null)) or 
          (ct.composition = 'SIMPLE' and c.id not in(select distinct container.id from gov.nih.nci.calims2.domain.inventory.Specimen where container.id is not null))) order by c.name]]>
  </query>
  <query name="gov.nih.nci.calims2.domain.inventory.Container.findContainersForSpecimenUpdate">
    <![CDATA[select c from gov.nih.nci.calims2.domain.inventory.Container as c inner join c.containerType as ct
    where (c.id = :containerId) or
          (c.isTemplate = false and (ct.composition = 'SIMPLE' and c.id not in(select distinct container.id from gov.nih.nci.calims2.domain.inventory.Specimen where container.id is not null)) )order by c.name]]>
  </query>
  <query name="gov.nih.nci.calims2.domain.inventory.Container.findContainersWithoutParents">
    <![CDATA[from gov.nih.nci.calims2.domain.inventory.Container where parentContainer.id is null]]>
  </query>
  <query name="gov.nih.nci.calims2.domain.inventory.Container.findByComposition">
    <![CDATA[from gov.nih.nci.calims2.domain.inventory.Container where containerType.composition = :composition order by name]]>
  </query>
  <query name="gov.nih.nci.calims2.domain.inventory.Container.findByCompositionAndTemplate">
    <![CDATA[from gov.nih.nci.calims2.domain.inventory.Container where containerType.composition = :composition and isTemplate = :isTemplate order by name]]>
  </query>
  <query name="gov.nih.nci.calims2.domain.inventory.Container.findByParentContainer">
    <![CDATA[from gov.nih.nci.calims2.domain.inventory.Container where parentContainer.id = :parentId order by name]]>
  </query>
  <query name="gov.nih.nci.calims2.domain.inventory.Container.findTargetContainers">
  <![CDATA[from gov.nih.nci.calims2.domain.inventory.Container where isTemplate = false and
    ((containerType.composition = 'COMPOSITE') or
     (containerType.composition = 'SIMPLE' and id not in(select distinct container.id from gov.nih.nci.calims2.domain.inventory.Specimen where container.id is not null))) order by name]]>
  </query>
  <query name="gov.nih.nci.calims2.domain.inventory.ContainerType.findByIds">
    <![CDATA[from gov.nih.nci.calims2.domain.inventory.ContainerType where id in (:ids)]]>
  </query>
  <query name="gov.nih.nci.calims2.domain.inventory.Specimen.findByCompositeContainerId">
    <![CDATA[from gov.nih.nci.calims2.domain.inventory.Specimen where container.parentContainer.id = :containerId order by name]]>
  </query>
  <query name="gov.nih.nci.calims2.domain.inventory.Specimen.findBySimpleContainerId">
    <![CDATA[from gov.nih.nci.calims2.domain.inventory.Specimen where container.id = :containerId order by name]]>
  </query>
  <query name="gov.nih.nci.calims2.domain.inventory.Specimen.findNucleicAcid">
    <![CDATA[from gov.nih.nci.calims2.domain.inventory.NucleicAcid na where na.class = gov.nih.nci.calims2.domain.inventory.NucleicAcid order by name]]>
  </query> 
  <query name="gov.nih.nci.calims2.domain.inventory.Specimen.findProtein">
    <![CDATA[from gov.nih.nci.calims2.domain.inventory.Protein protein where protein.class = gov.nih.nci.calims2.domain.inventory.Protein order by name]]>
  </query>
  <query name="gov.nih.nci.calims2.domain.inventory.Specimen.findPrimers">
    <![CDATA[from gov.nih.nci.calims2.domain.inventory.Primer]]>
  </query>
  <query name="gov.nih.nci.calims2.domain.inventory.Specimen.findProteins">
    <![CDATA[from gov.nih.nci.calims2.domain.inventory.Protein]]>
  </query>
</hibernate-mapping>